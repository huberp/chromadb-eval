# ChromaDB Eval - Vector Search Webapp

This is a browser-based semantic search application that demonstrates vector search capabilities entirely in the browser using JavaScript and transformers.js.

## Features

- **Browser-only vector database**: No server required, all processing happens in the browser
- **LLM-based embeddings**: Uses `@huggingface/transformers` with the same model as the backend (`Xenova/all-mpnet-base-v2`)
- **Real-time semantic search**: Find the top 5 most similar document chunks to your query
- **Similarity scores**: Shows percentage match for each result
- **Content preview**: View chunk content with expand/collapse functionality
- **Links to source**: Direct links to view full chunks and documents on GitHub

## How It Works

1. **Data Loading**: The app loads pre-computed embeddings from the `data-main` branch
   - Embeddings are generated by the `prepare-data.ts` script
   - Stored in `embeddings.json` with metadata for each chunk

2. **Model Initialization**: Loads the same embedding model used by the backend
   - Uses `@huggingface/transformers` CDN for zero-install experience
   - Model: `Xenova/all-mpnet-base-v2` (768-dimensional vectors)

3. **Query Processing**: When you enter a search query:
   - Computes embedding for your query using transformers.js
   - Calculates cosine similarity with all stored embeddings
   - Returns top 5 most similar chunks with similarity scores

4. **Results Display**: Shows matching chunks with:
   - Similarity percentage
   - Chunk metadata (index, size, section)
   - Content preview (expandable)
   - Links to view full content on GitHub

## Architecture

- **Pure HTML/CSS/JavaScript**: No build step required
- **ES6 Modules**: Uses modern JavaScript with native module imports
- **CDN Dependencies**: `@huggingface/transformers` loaded from CDN
- **Static Hosting**: Can be served from GitHub Pages or any static host

## Data Flow

```
GitHub Repository (main branch)
    ↓ (on push to main)
prepare-data.ts generates embeddings
    ↓
data-main branch (contains embeddings.json)
    ↓ (deployed to)
gh-pages branch (contains index.html)
    ↓ (fetches data from)
data-main branch at runtime
    ↓
Browser displays results
```

## Local Development

To test locally, simply open `index.html` in a modern browser. Note that:
- You need an internet connection to load transformers.js from CDN
- The embeddings are loaded from the `data-main` branch on GitHub
- CORS is not an issue since GitHub raw content allows cross-origin requests

Alternatively, serve with a local server:

```bash
cd webapp
python3 -m http.server 8080
# or
npx serve
```

Then open http://localhost:8080 in your browser.

## GitHub Pages Deployment

The webapp is automatically deployed to GitHub Pages by the `.github/workflows/deploy-gh-pages.yml` workflow:

1. Triggers on push to main when webapp files change
2. Copies the webapp directory to the gh-pages branch
3. GitHub Pages serves the content at `https://[username].github.io/[repo]/`

## Configuration

The app is configured to load data from:
- Owner: `huberp`
- Repo: `chromadb-eval`
- Branch: `data-main`
- File: `embeddings.json`

To use with your own repository, update the `OWNER` and `REPO` constants in `index.html`.

## Browser Compatibility

Requires a modern browser with:
- ES6 module support
- Fetch API
- WebAssembly (for transformers.js)

Tested on:
- Chrome 90+
- Firefox 89+
- Safari 15+
- Edge 90+
